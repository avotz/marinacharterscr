function get_client_server_timezone_offset_hrs(o){if(!booking_form_params.timezone_conversion)return 0;var i=moment(o),n=i.utcOffset();return i.tz(booking_form_params.server_timezone),(n-i.utcOffset())/60}jQuery(document).ready(function(a){window.console||(window.console={log:function(o){}});var s=[];a(".wc-bookings-booking-form").on("change","input, select",function(o){var i=a(this).attr("name");if(!a(this).closest("fieldset").find(".picker:eq(0)").data("is_range_picker_enabled")||"wc_bookings_field_duration"===i){var n=a(".wc-bookings-booking-form").index(this);$form=a(this).closest("form");var r=!$form.find("[name='wc_bookings_field_start_date_day']").val()&&!$form.find("#wc_bookings_field_start_date").val();if("wc_bookings_field_resource"===i&&r)wc_bookings_date_picker.refresh_datepicker();else if(!jQuery(o.target).hasClass("addon")||!r){var t=$form.find("input.required_for_calculation"),e=!0;a.each(t,function(o,i){a(i).val()||(e=!1)}),e?($form.find(".wc-bookings-booking-cost").block({message:null,overlayCSS:{background:"#fff",backgroundSize:"16px 16px",opacity:.6}}).show(),s[n]=a.ajax({type:"POST",url:booking_form_params.ajax_url,data:{action:"wc_bookings_calculate_costs",form:$form.serialize()},success:function(o){"{"!==o.charAt(0)&&(console.log(o),o="{"+o.split(/\{(.+)?/)[1]),result=a.parseJSON(o),"ERROR"==result.result?($form.find(".wc-bookings-booking-cost").html(result.html),$form.find(".wc-bookings-booking-cost").unblock(),$form.find(".single_add_to_cart_button").addClass("disabled")):"SUCCESS"==result.result?($form.find(".wc-bookings-booking-cost").html(result.html),$form.find(".wc-bookings-booking-cost").unblock(),$form.find(".single_add_to_cart_button").removeClass("disabled"),booking_form_params.pao_active&&"true"!==booking_form_params.pao_pre_30&&void 0!==result.raw_price&&($form.find(".wc-bookings-booking-cost").attr("data-raw-price",result.raw_price),a("form.cart").trigger("woocommerce-product-addons-update"))):($form.find(".wc-bookings-booking-cost").hide(),$form.find(".single_add_to_cart_button").addClass("disabled"),console.log(o)),a(document.body).trigger("wc_booking_form_changed")},error:function(){$form.find(".wc-bookings-booking-cost").hide(),$form.find(".single_add_to_cart_button").addClass("disabled"),booking_form_params.pao_active&&"true"!==booking_form_params.pao_pre_30&&a("form.cart").trigger("woocommerce-product-addons-update")},dataType:"html"})):$form.find(".wc-bookings-booking-cost").hide()}}}).each(function(){a(this).closest("form").find(".single_add_to_cart_button").addClass("disabled")}),a(".single_add_to_cart_button").on("click",function(o){if(a(this).hasClass("disabled"))return alert(booking_form_params.i18n_choose_options),o.preventDefault(),!1}),"true"===booking_form_params.pao_pre_30&&a(".wc-bookings-booking-form").parent().on("updated_addons",function(){a(".wc-bookings-booking-form").find("input").first().trigger("change")}),a(".wc-bookings-booking-form, .wc-bookings-booking-form-button").show().removeAttr("disabled")});
